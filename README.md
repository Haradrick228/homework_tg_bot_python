# Telegram-бот: вода, калории и тренировки

Телеграм-бот на `python-telegram-bot 20.x`, который считает норму воды и калорий, учитывает погоду, фиксирует еду и тренировки. Код разбит на модули (ООП), данные хранятся в памяти процесса.

## Запуск
- Задайте переменные окружения:
  - `BOT_TOKEN` — токен бота из @BotFather.
  - `OPENWEATHER_API_KEY` — опционально, ключ OpenWeatherMap для учета температуры.
- Установите зависимости: `python -m pip install -r requirements.txt`
- Запустите: `python bot.py`

## Структура
- `app/config.py` — конфигурация, загрузка токенов из окружения.
- `app/models.py` — датаклассы профиля и логов.
- `app/services/*` — расчеты, погода, калорийность, хранилище, построение графиков.
- `app/bot/*` — хэндлеры, состояния, форматирование ответов.
- `app/main.py` — сборка зависимостей и запуск `Application`.
- `bot.py` — точка входа.

## Команды
- `/start` — описание возможностей.
- `/help` — список команд.
- `/set_profile` — настройка: вес, рост, возраст, активность, город, пол, цель калорий.
- `/log_water <мл>` — записать воду.
- `/log_food <название>` — найти калорийность (OpenFoodFacts) и ввести граммы.
- `/log_workout <тип> <мин>` — записать тренировку, калории и бонус воды.
- `/check_progress` — текстовый прогресс по воде и калориям.
- `/plot_progress` — графики прогресса (вода/калории).
- `/cancel` — отмена текущего диалога.

## Логика расчетов
- Вода: `вес * 30 мл` + `500 мл` за каждые `30 минут` активности + `500–1000 мл` при жаре (>25°C) + `200 мл` за каждые `30 минут` тренировки.
- Калории: Миффлин–Сан Жеор с поправкой на пол + `200–400` ккал за активность. Цель можно задать вручную.

